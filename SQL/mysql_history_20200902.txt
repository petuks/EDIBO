_HiStOrY_V2_
SELECT CURRENT_USER();
 SHOW DATABASES;
USE db24;
SELECT DATABASE();
CREATE TABLE MyTBl_0a (Id INT PRIMARY KEY AUTO_INCREMENT, Title VARCHAR(20) NOT NULL);
DESCRIBE MyTBL_0a;
DROP TABLE MyTBl_0a;
CREATE TABLE MyTBL_0a (Id INT PRIMARY KEY AUTO_INCREMENT, Title VARCHAR(20) NOT NULL);
DESCRIBE MyTBL_0a;
EXIT;
 SHOW DATABASES;
 SHOW TABLES;
USE db24;
 SHOW TABLES;
DESCRIBE MyTBL_0;
DESCRIBE MyTBL_0a;
SELECT * FROM MyTBL_0a;
SELECT * FROM MyTBL_0;
INSERT INTO MyTBL_0a (Title) VALUES ('Viens');
INSERT INTO MyTBL_0a (Title) VALUES ('Divi');
INSERT INTO MyTBL_0a (Title) VALUES ('Triis');
SELECT * FROM MyTBL_0a;
SHOW TABLE STATUS FROM MyTBL_0;
SHOW TABLE STATUS WHERE Name='MyTBL_0';
SHOW TABLE STATUS WHERE Name='MyTBL_0a';
SELECT * FROM MyTBL_0;
SELECT * FROM MyTBL_0a;
ALTER TABLE MyTBL_0 ADD fkColumn4 INT FOREIGN KEY REFERENCES MyTBL_0a(Id) DEFAULT 1;
ALTER TABLE MyTBL_0 ADD fkColumn4 INT DEFAULT 1, FOREIGN KEY (fkColumn4) REFERENCES MyTBL_0a(Id);
ALTER TABLE MyTBL_0 ADD fkColumn4 INT DEFAULT 1;
SELECT * FROM MyTBL_0a;
SELECT * FROM MyTBL_0;
ALTER TABLE MyTBL_0 ADD FOREIGN KEY (fkColumn4) REFERENCES MyTBL_0a(Id);
DESCRIBE MyTBL_0a;
DESCRIBE MyTBL_0;
DESCRIBE MyTBL_0a;
SELECT * FROM MyTBL_0;
SELECT * FROM MyTBL_0a;
DELETE FROM MyTBL_0 WHERE column3=1;
SELECT * FROM MyTBL_0;
SELECT * FROM MyTBL_0a;
DELETE FROM MyTBL_0a WHERE Id=3;
DELETE FROM MyTBL_0a WHERE Id=2;
DELETE FROM MyTBL_0a WHERE Id=1;
SELECT * FROM MyTBL_0a;
DESCRIBE MyTBL_0;
DESCRIBE MyTBL_0a;
ALTER TABLE MyTBL_0 MODIFY fkColumn4 INT;
DESCRIBE MyTBL_0;
ALTER TABLE MyTBL_0 DROP FOREIGN KEY;
DESCRIBE MyTBL_0;
DESCRIBE MyTBL_0a;
ALTER TABLE MyTBL_0 DROP FOREIGN KEY MUL;
ALTER TABLE MyTBL_0 DROP FOREIGN KEY fkColumn4;
SHOW TABLE STATUS WHERE Name='MyTBL_0a';
select COLUMN_NAME, CONSTRAINT_NAME, REFERENCED_COLUMN_NAME, REFERENCED_TABLE_NAME
from information_schema.KEY_COLUMN_USAGE
where TABLE_NAME = 'table to be checked';
select COLUMN_NAME, CONSTRAINT_NAME, REFERENCED_COLUMN_NAME, REFERENCED_TABLE_NAME from information_schema.KEY_COLUMN_USAGE where TABLE_NAME = 'table to be checked';
select * from information_schema.KEY_COLUMN_USAGE where TABLE_NAME = 'MyTBL_0';
SHOW CREATE TABLE MyTBL_0;
ALTER TABLE MyTBL_0 DROP FOREIGN KEY MyTBL_0_ibfk_1;
DESCRIBE MyTBL_0;
ALTER TABLE MyTBL_0 DROP FOREIGN KEY MyTBL_0_ibfk_10;
ALTER TABLE MyTBL_0 DROP FOREIGN KEY MyTBL_0_ibfk_1;
DELETE FROM MyTBL_0a WHERE Id=1;
ALTER TABLE MyTBL_0 DROP INDEX fkColumn4;
DESCRIBE MyTBL_0;
ALTER TABLE MyTBL_0 ADD CONSTRAINT MyCONS FOREIGN KEY (fkColumn4) REFERENCES MyTBL_0a(Id);
ALTER TABLE MyTBL_0 ADD FOREIGN KEY (fkColumn4) REFERENCES MyTBL_0a(Id);
INSERT INTO MyTBL_0a (Title) VALUES ('Chetri');
ALTER TABLE MyTBL_0 ADD CONSTRAINT MyCONS FOREIGN KEY (fkColumn4) REFERENCES MyTBL_0a(Id);
ALTER TABLE MyTBL_0 DROP FOREIGN KEY MyCONS;
DESCRIBE MyTBL_0;
SHOW CREATE TABLE MyTBL_0;
select * from information_schema.KEY_COLUMN_USAGE where TABLE_NAME = 'MyTBL_0';
ALTER TABLE MyTBL_0 ADD CONSTRAINT MyCONS1 FOREIGN KEY (fkColumn4) REFERENCES MyTBL_0a(Id);
DESCRIBE MyTBL_0;
DESCRIBE MyTBL_0a;
SHOW CREATE TABLE MyTBL_0;
SHOW CREATE TABLE MyTBL_0a;
SELECT * FROM MyTBL_0;
SELECT * FROM MyTBL_0a;
UPDATE MyTBL_0 SET fkColumn4=4 WHERE fkColumn4=1;
SELECT * FROM MyTBL_0a;
SELECT * FROM MyTBL_0;
ALTER TABLE MyTBL_0 ADD CONSTRAINT MyCONS11 FOREIGN KEY (fkColumn4) REFERENCES MyTBL_0a(Id);
SHOW CREATE TABLE MyTBL_0;
ALTER TABLE MyTBL_0 DROP INDEX fkColumn4;
DESCRIBE MyTBL_0a;
DESCRIBE MyTBL_0;
SHOW CREATE TABLE MyTBL_0;
DESCRIBE MyTBL_0;
ALTER TABLE MyTBL_0 DROP INDEX fkColumn4;
ALTER TABLE MyTBL_0 DROP FOREIGN KEY MyCON11;
ALTER TABLE MyTBL_0 DROP FOREIGN KEY MyCONS11;
DESCRIBE MyTBL_0;
ALTER TABLE MyTBL_0 DROP INDEX fkColumn4;
SHOW CREATE TABLE MyTBL_0;
ALTER TABLE MyTBL_0 DROP INDEX MyCONS11;
DESCRIBE MyTBL_0;
SELECT * FROM MyTBL_0;
SELECT * FROM MyTBL_0a;
DELETE * FROM MyTBL_0a;
DELETE FROM MyTBL_0a;
SELECT * FROM MyTBL_0;
SELECT * FROM MyTBL_0a;
SHOW CREATE TABLE MyTBL_0a;
DESCRIBE MyTBL_0a;
SHOW CREATE TABLE MyTBL_0a;
SELECT * FROM MyTBL_0a;
ALTER TABLE MyTBL_0a AUTO_INCREMENT=1; 
SHOW CREATE TABLE MyTBL_0a;
SELECT * FROM MyTBL_0a;
SELECT * FROM MyTBL_0;
DESCRIBE MyTBL_0a;
DESCRIBE MyTBL_0;
SHOW CREATE TABLE MyTBL_0a;
SHOW GRANTS;
SELECT CURRENT_USER();
SHOW GRANTS;
SHOW TRIGGERS;
DELIMITER $$
CREATE TRIGGER MyTBL_0a_guard BEFORE INSERT ON MyTBL_0a
FOR EACH ROW
BEGIN
IF NEW.Title='ABC' THEN
SIGNAL SQLSTATE '50000' SET mesage_text='Ai-jaj-jai, kļūda!';
END IF;
END;$$
CREATE TRIGGER MyTBL_0a_guard BEFORE INSERT ON MyTBL_0a FOR EACH ROW BEGIN IF NEW.Title='ABC' THEN SIGNAL SQLSTATE '50000' SET mesage_text='Ai-jaj-jai, kļūda!'; END IF; END;$$
CREATE TRIGGER MyTBL_0a_guard BEFORE INSERT ON MyTBL_0a FOR EACH ROW BEGIN IF NEW.Title='ABC' THEN SIGNAL SQLSTATE '50000' SET message_text='Ai-jaj-jai, kļūda!'; END IF; END;$$
SHOW TRIGGERS;
$$
DELIMITER ;
SHOW TRIGGERS;
SHOW TRIGGERS WHERE Table='MyTBL_0a';
SHOW TRIGGERS WHERE Table LIKE 'MyTBL_0a';
SHOW TRIGGERS;
SHOW TRIGGERS WHERE Table=MyTBL_0a;
SHOW TRIGGERS WHERE Table='MyTBL_0a';
SHOW TRIGGERS;
SHOW TRIGGERS LIKE '%MyTBL_0a%' \134G;
DELIMITER ;
SHOW TRIGGERS LIKE '%MyTBL_0a%' \134G;
SHOW TRIGGERS;
SHOW TRIGGERS LIKE '%MyTBL_0a%' \134G;
INSERT INTO MyTBL_0a (Title) VALUES ('ABC');
SELECT *  FROM MyTBL_0a;
INSERT INTO MyTBL_0a (Title) VALUES ('ABCD');
SELECT *  FROM MyTBL_0a;
INSERT INTO MyTBL_0a (Title) VALUES ('ABC');
SELECT *  FROM MyTBL_0a;
INSERT INTO MyTBL_0a (Title) VALUES ('ABCDE');
SELECT *  FROM MyTBL_0a;
INSERT INTO MyTBL_0a (Title) VALUES ('ABC');
DELIMITER $$
CREATE TRIGGER MyTBL_0a_guard BEFORE INSERT ON MyTBL_0a FOR EACH ROW BEGIN IF NEW.Title='ABC' THEN SIGNAL SQLSTATE '50000' SET message_text='Ai-jaj-jai, kļūda!'; END IF; END;$$
DELIMITER ;
DROP TRIGGER MyTBL_0a_guard;
SHOW TRIGGERS LIKE '%MyTBL_0a%' \134G;
DELIMITER $$
CREATE TRIGGER MyTBL_0a_guard BEFORE INSERT ON MyTBL_0a FOR EACH ROW BEGIN SIGNAL SQLSTATE '50000' SET message_text=CURRENT_USER(); END IF; END;$$
CREATE TRIGGER MyTBL_0a_guard BEFORE INSERT ON MyTBL_0a FOR EACH ROW BEGIN SIGNAL SQLSTATE '50000' SET message_text=CURRENT_USER(); END;$$
CREATE TRIGGER MyTBL_0a_guard BEFORE INSERT ON MyTBL_0a FOR EACH ROW BEGIN SIGNAL SQLSTATE '50000' SET message_text=USER(); END;$$
CREATE TRIGGER MyTBL_0a_guard BEFORE INSERT ON MyTBL_0a FOR EACH ROW BEGIN DECLARE a varchar(100); SELECT CURRENT_USER() INTO @a; SIGNAL SQLSTATE '50000' SET message_text=@a; END;$$
INSERT INTO MyTBL_0a (Title) VALUES ('ABC');
$$
DELIMITER ;
exit;
source script_1.sql
SHOW CREATE TABLE MyTBL_0a;
exit;
source script_1.sql
SHOW CREATE TABLE MyTBL_0b;
exit;
source script_1.sql
SHOW TABLES;
exit;
